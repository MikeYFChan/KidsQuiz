<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidsQuiz | Interactive Learning</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="Quiz.css">
</head>

<body>
    <div class="container">
        <div id="user-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-labelledby="user-modal-title">
            <div class="modal-content">
                <h2 id="user-modal-title">Add User</h2>
                <form id="user-form" novalidate>
                    <div class="form-group">
                        <label for="user-name">Name</label>
                        <input type="text" id="user-name" name="user-name" required placeholder="Enter your name"
                            minlength="2" maxlength="50" />
                        <span class="error-message" id="user-name-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="user-grade">Grade</label>
                        <select id="user-grade" name="user-grade" required>
                            <option value="">Select your grade</option>
                            <option value="Year 3">Year 3</option>
                            <option value="Year 6">Year 6</option>
                        </select>
                        <span class="error-message" id="user-grade-error"></span>
                    </div>
                    <div class="modal-buttons">
                        <button type="submit" class="submit-button" id="save-user-btn">Save User</button>
                        <button type="button" id="close-user-modal" class="nav-button">Cancel</button>
                    </div>
                    <div class="form-success" id="user-form-success"></div>
                </form>
            </div>
        </div>
        <!-- Welcome Screen - Subject Selection -->
        <div id="subject-screen" class="screen active">
            <header class="header">
                <h1 id="title" class="text-center">Primary School Quiz</h1>
                <p class="description subject-description text-center">
                    Choose a subject to begin!
                </p>
            </header>
            <div class="subject-selection">
                <button type="button" class="subject-button" data-subject="Maths">
                    <span class="subject-icon">üî¢</span>
                    <span class="subject-name">Maths</span>
                </button>
                <button type="button" class="subject-button" data-subject="English">
                    <span class="subject-icon">üìö</span>
                    <span class="subject-name">English</span>
                </button>
                <button type="button" class="subject-button" data-subject="Chinese">
                    <span class="subject-icon">üèÆ</span>
                    <span class="subject-name">Chinese</span>
                </button>
                <button type="button" class="subject-button" data-subject="Science">
                    <span class="subject-icon">üî¨</span>
                    <span class="subject-name">Science</span>
                </button>
            </div>
        </div>

        <!-- Year Selection Screen -->
        <div id="year-screen" class="screen">
            <header class="header">
                <h1 id="selected-subject-title" class="text-center"></h1>
                <p class="description year-description text-center">
                    Choose your year level
                </p>
            </header>
            <div class="year-selection">
                <button type="button" class="year-button" data-year="Year 3">Year 3</button>
                <button type="button" class="year-button" data-year="Year 6">Year 6</button>
                <button type="button" class="back-button" id="back-to-subject">‚Üê Back to Subjects</button>
            </div>
        </div>

        <!-- Question Screen -->
        <div id="question-screen" class="screen">
            <header class="header">
                <div class="quiz-header-info">
                    <span id="quiz-title"></span>
                    <div style="display:flex;align-items:center;gap:1rem;">
                        <span id="timer-display" class="timer-display">Time: 60s</span>
                        <button type="button" class="back-to-start-btn" id="back-to-start">‚Üê Change Quiz</button>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <p class="question-counter">
                    Question <span id="current-question">1</span> of <span id="total-questions">5</span>
                </p>
            </header>

            <form id="quiz-form">
                <div class="form-group">
                    <label class="question-label" id="question-text">
                        Loading question...
                    </label>
                    <button type="button" id="speak-btn" class="tts-button" aria-label="Speak Question">
                        ÊúóËÆÄÂÖßÂÆπ Speak üîä
                    </button>
                    <input type="text" id="answer-input" class="form-control" placeholder="Type your answer here"
                        autocomplete="off" />
                    <div id="choices-container" class="choices-container"></div>
                    <div id="quiz-answer-error" class="quiz-answer-error"></div>
                </div>

                <div class="form-group button-group">
                    <button type="button" id="prev-btn" class="nav-button" style="display: none;">
                        Previous
                    </button>
                    <button type="submit" id="next-btn" class="submit-button">
                        Next Question
                    </button>
                </div>
            </form>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <header class="header">
                <h1 class="text-center">Quiz Results</h1>
                <p class="text-center" id="results-subtitle"></p>
            </header>

            <div class="results-container">
                <div class="score-display">
                    <h2 id="score-text">0 / 5</h2>
                    <p id="percentage-text">0%</p>
                    <div class="score-message" id="score-message"></div>
                </div>

                <div class="answers-review">
                    <h3>Your Answers:</h3>
                    <div id="answers-list"></div>
                </div>

                <div class="form-group button-group">
                    <button type="button" id="restart-btn" class="submit-button">
                        Take Quiz Again
                    </button>
                    <button type="button" id="new-quiz-btn" class="nav-button">
                        Choose New Quiz
                    </button>
                </div>
            </div>
        </div>
        <!-- Inline footer: compact user select + buttons placed under content -->
        <div id="user-footer" class="user-footer">
            <select id="user-select" class="user-select">
                <option value="">Select user</option>
            </select>
            <button id="open-user-modal-footer" class="nav-button">Add User</button>
            <button id="delete-user-btn" class="nav-button" style="background-color: var(--error);">Delete User</button>
            <button id="open-history-btn" class="nav-button">View History</button>
        </div>

        <div id="history-modal" class="modal-overlay history-modal" aria-hidden="true" role="dialog"
            aria-labelledby="history-modal-title">
            <div class="modal-content">
                <h2 id="history-modal-title">History</h2>
                <div id="history-list">No history</div>
                <div class="modal-buttons">
                    <button id="close-history-btn" class="nav-button">Close</button>
                    <button id="clear-history-btn" class="nav-button">Clear History</button>
                </div>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
            <script src="js/app.js"></script>
</body>

</html>